function addBoxShadow(e){e.style.boxShadow="0 0 20px #252121"}function removeBoxShadow(e){e.style.boxShadow="none"}const helpParagraph=document.getElementById("help"),footer=document.querySelector("footer");function validateInputsAndSimulate(){let e=document.getElementById("pageSize"),t=document.getElementById("Addresses"),l=document.getElementById("References"),r=document.querySelectorAll('input[name="algorithm"]'),a=!0;""===e.value.trim()&&(alert("Please enter a page size."),a=!1),""===t.value.trim()&&""===l.value.trim()?(alert("Please enter either addresses or references."),a=!1):""!==t.value.trim()&&""!==l.value.trim()&&(alert("Please enter either addresses or references, not both."),a=!1);let n=!1;r.forEach(e=>{e.checked&&(n=!0)}),n||(alert("Please select an algorithm."),a=!1),a&&simulateMemoryManagement()}function validateNumberInput(e){e.value=e.value.replace(/[^\d]/g,"")}function validateAddressInput(e){e.value=e.value.replace(/[^0-9 ,]/g,"")}function simulateMemoryManagement(){let e=parseInt(document.getElementById("pageSize").value),t=document.getElementById("Addresses").value,l=document.getElementById("References").value,r=0,a=0,n=[],d=[];""!==t.trim()&&(r=(n=t.split(/[ ,\[\]]+/).filter(e=>""!==e.trim()).map(e=>parseInt(e))).length),""!==l.trim()&&(a=(d=l.split(/[ ,\[\]]+/).filter(e=>""!==e.trim()).map(e=>parseInt(e))).length);let s=document.querySelector('input[name="algorithm"]:checked').value,i="",o=0,c=0;switch(s){case"1":[i,o,c]=simulateFIFO(e,r,n,a,d);break;case"2":[i,o,c]=simulateLRU(e,r,n,a,d);break;case"3":[i,o,c]=simulateOPT(e,r,n,a,d);break;case"4":[i,o,c]=simulateLFU(e,r,n,a,d)}document.getElementById("outputDiv").innerHTML=i,document.getElementById("page_faults").innerHTML="Number of faults: "+c,document.getElementById("hits").innerHTML="Number of hits: "+o,document.getElementById("percentage").innerHTML="Percentage: "+(c/(r+a)*100).toFixed(2)+"%"}function simulateFIFO(e,t,l,r,a){let n=t?1e3*e:e,d=Array(e).fill(-1),s=0,i=0,o="",c=[];for(let u=0;u<(t||r);u++){let f;f=t?Math.ceil(l[u]/n):Math.ceil(a[u]);let m='<table class="memoryTable"><thead><tr>';if(m+="<th>"+f+"</th></tr></thead><tbody>",d.includes(f)){i++;for(let g=0;g<e;g++)m+="<tr",d[g]===f&&(m+=' class="red-cell"'),m+="><td>",-1===d[g]?m+="-":d[g]===f?m+="("+f+")":m+=d[g],m+="</td></tr>";m+='<tr><td colspan="'+e+'">Hit</td></tr>'}else{if(""!==o&&(o+="</tbody></table>"),c.length<e)d[c.length]=f,c.push(f);else{let h=c.shift();d[d.indexOf(h)]=f,c.push(f)}s++;for(let $=0;$<e;$++)m+="<tr><td",d[$]===f&&(m+=' class="green-cell"'),m+=">",-1===d[$]?m+="-":d[$]===f?m+="["+f+"]":m+=d[$],m+="</td></tr>";m+='<tr><td colspan="'+e+'">Page fault</td></tr>'}m+="</tbody></table>",o+=m}return[o,i,s]}function simulateLRU(e,t,l,r,a){let n=t?1e3*e:e,d=Array(e).fill(-1),s=0,i=0,o="",c=[];for(let u=0;u<(t||r);u++){let f;f=t?Math.ceil(l[u]/n):Math.ceil(a[u]);let m='<table class="memoryTable"><thead><tr>';m+="<th>"+f+"</th></tr></thead><tbody>";let g=d.indexOf(f);if(-1===g){if(""!==o&&(o+="</tbody></table>"),c.length<e)d[c.length]=f,c.push(f);else{let h=c.shift();d[g=d.indexOf(h)]=f,c.push(f)}s++;for(let $=0;$<e;$++)m+="<tr><td",d[$]===f&&(m+=' class="green-cell"'),m+=">",-1===d[$]?m+="-":d[$]===f?m+="["+f+"]":m+=d[$],m+="</td></tr>";m+='<tr><td colspan="'+e+'">Page fault</td></tr>'}else{i++,c.splice(c.indexOf(f),1),c.push(f);for(let p=0;p<e;p++)m+="<tr",d[p]===f&&(m+=' class="red-cell"'),m+="><td>",-1===d[p]?m+="-":d[p]===f?m+="("+f+")":m+=d[p],m+="</td></tr>";m+='<tr><td colspan="'+e+'">Hit</td></tr>'}m+="</tbody></table>",o+=m}return[o,i,s]}function simulateOPT(e,t,l,r,a){let n=t?1e3*e:e,d=Array(e).fill(-1),s=0,i=0,o="";for(let c=0;c<(t||r);c++){let u;u=t?Math.ceil(l[c]/n):Math.ceil(a[c]);let f='<table class="memoryTable"><thead><tr>';if(f+="<th>"+u+"</th></tr></thead><tbody>",d.includes(u)){i++;for(let m=0;m<e;m++)f+="<tr",d[m]===u&&(f+=' class="red-cell"'),f+="><td>",-1===d[m]?f+="-":d[m]===u?f+="("+u+")":f+=d[m],f+="</td></tr>";f+='<tr><td colspan="'+e+'">Hit</td></tr>'}else{if(""!==o&&(o+="</tbody></table>"),d.includes(-1))d[d.indexOf(-1)]=u;else{let g={};for(let h=c+1;h<(t||r);h++){let $=t?Math.ceil(l[h]/n):Math.ceil(a[h]);g[$]||(g[$]=h)}let p=-1,y=-1;for(let b=0;b<d.length;b++){let _=d[b];if(g[_])g[_]>p&&(p=g[_],y=b);else{y=b;break}}d[y]=u}s++;for(let B=0;B<e;B++)f+="<tr><td",d[B]===u&&(f+=' class="green-cell"'),f+=">",-1===d[B]?f+="-":d[B]===u?f+="["+u+"]":f+=d[B],f+="</td></tr>";f+='<tr><td colspan="'+e+'">Page fault</td></tr>'}f+="</tbody></table>",o+=f}return[o,i,s]}function simulateLFU(e,t,l,r,a){let n=t?1e3*e:e,d=Array(e).fill(-1),s=0,i=0,o="",c=new Map,u=new Map;for(let f=0;f<(t||r);f++){let m;m=t?Math.ceil(l[f]/n):Math.ceil(a[f]);let g='<table class="memoryTable"><thead><tr>';if(g+="<th>"+m+"</th></tr></thead><tbody>",u.has(m)||u.set(m,f),d.includes(m)){i++;let h=c.get(m)||0;c.set(m,h+1),d[d.indexOf(m)]=m;for(let $=0;$<e;$++)g+="<tr",d[$]===m&&(g+=' class="red-cell"'),g+="><td>",-1===d[$]?g+="-":d[$]===m?g+="("+m+")":g+=d[$],g+="</td></tr>";g+='<tr><td colspan="'+e+'">Hit</td></tr>'}else{if(""!==o&&(o+="</tbody></table>"),d.includes(-1))d[d.indexOf(-1)]=m;else{let p=d[0],y=c.get(p)||1/0;for(let b=1;b<d.length;b++){let _=d[b],B=c.get(_)||1/0;B<y&&(p=_,y=B)}let v=d.filter(e=>c.get(e)===y);if(v.length>1){let E=v.reduce((e,t)=>u.get(t)<u.get(e)?t:e,v[0]);d[d.indexOf(E)]=m}else d[d.indexOf(v[0])]=m}s++,c.has(m)?c.set(m,c.get(m)+1):c.set(m,1);for(let I=0;I<e;I++)g+="<tr><td",d[I]===m&&(g+=' class="green-cell"'),g+=">",-1===d[I]?g+="-":d[I]===m?g+="["+m+"]":g+=d[I],g+="</td></tr>";g+='<tr><td colspan="'+e+'">Page fault</td></tr>'}g+="</tbody></table>",o+=g}return[o,i,s]}function showBugReportForm(){document.querySelectorAll("body > *:not(#bugReportForm)").forEach(function(e){e.style.display="none"});var e=document.getElementById("bugReportForm");e.classList.remove("hidden"),e.classList.add("centered")}function hideBugReportForm(){document.getElementById("bugReportForm").classList.add("hidden"),document.querySelectorAll("body > *:not(#bugReportForm)").forEach(function(e){e.style.display="block"})}helpParagraph.addEventListener("click",function(){footer.classList.toggle("show")}),document.getElementById("image").addEventListener("click",showBugReportForm),document.getElementById("sendBugReport").addEventListener("click",function(){hideBugReportForm()}),document.getElementById("cancelBugReport").addEventListener("click",function(){hideBugReportForm()});